<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Etch a Sketch</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="grid-container">

    </div>
    <div class="button-container">
        <button class="change-size-button">Change Grid</button>
        <button class="reset-button">Erase All</button>
        <div class="size-container">
            <button class="screen-size-btn minus">-</button>
            <div class="size-content"></div>
            <button class="screen-size-btn plus">+</button>
        </div>
    </div>

    <script>
        //default
        let gridWidth = 16;
        let gridHeight = 16;
        let screenSize = 600;
        let newBlock;

        let mouseDown = false;
            document.body.addEventListener('mousedown',() => (mouseDown = true));
            document.body.addEventListener('mouseup',() => (mouseDown = false));

        const gridContainer = document.querySelector('.grid-container');
        const resetButton = document.querySelector('.reset-button');
              resetButton.addEventListener('click',reset);
        const changeGridButton = document.querySelector('.change-size-button');
              changeGridButton.addEventListener('click',changeGrid);
        const btnContent = document.querySelector('.size-content');
              btnContent.textContent = screenSize;
        const screenPlus = document.querySelector('.plus');
              screenPlus.addEventListener('click',() => {if (screenSize <= 750)screenSize += 50; changeScreenSize(screenSize);});
        const screenMinus = document.querySelector('.minus');
              screenMinus.addEventListener('click', () => {if(screenSize > 600)screenSize -= 50; changeScreenSize(screenSize);});

        function createGrid(){

            for (let i = 0; i < gridHeight * gridWidth; i++){
                newBlock = document.createElement('div');
                newBlock.classList.add('block');
                newBlock.style.setProperty('--BoxWidth', screenSize / gridWidth+'px');
                gridContainer.appendChild(newBlock);
            }
            newBlock = document.querySelectorAll('.block');
            newBlock.forEach(a => a.addEventListener('mousedown', draw));
            newBlock.forEach(a => a.addEventListener('mouseover', draw));
        }

        createGrid();

        function draw (e){
            if(e.type == 'mouseover' && !mouseDown)return;
            this.style.setProperty('background', 'black');
        }
        function reset (){
            newBlock.forEach(a => a.style.setProperty('background-color', 'darkgray'));
        }
        function deleteOldGrid(){
            newBlock.forEach(block => block.remove());
        }
        function changeScreenSize(size){
            btnContent.textContent = size;
            newBlock.forEach(a => a.style.setProperty('--BoxWidth', screenSize / gridWidth+'px'));
            gridContainer.style.setProperty('--ScreenSize', size+'px');
        }
        function changeGrid (){
            gridWidth = prompt('Input Grid Size: ');
            if(gridWidth == null) return;
            if(gridWidth > 64)alert('ERROR, max = 64x64');
            deleteOldGrid();
            gridHeight = gridWidth; createGrid(); //gridHeight and gridWidth are seperate values for the possibility of using 1D arrays in the future
        }

    </script>
</body>
</html>